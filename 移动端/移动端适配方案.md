# 移动端的适配方案

[toc]

不同的尺寸的手机设备上，页面相对性大道合理的展示（自适应）或者保持统一效果的等比缩放

## 百分比适配

根据父级计算百分比，需要配个其他布局使用

    <div class="container">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
    html,body{
        width:100%;
        .container{
            width:100%;
            div{
                float:left;
                width:25%;
            }
        }
    }

## viewport缩放适配

把所有机型的css像素设置成一致的,需要动态设置
    缩放比公式: 缩放比 = css像素/375

    <script>
        (function(){
            //获取CSS像素,需要确保缩放为1(minimum-scale=1,maximum-scale=1)
            let pageWidth = document.documentElement.clientWidth;
            let pageWidth = window.innerWidth;
            let pageWidth = window.screen.width;
            //求缩放比
            var scale = pageWidth / 375 ;
            //动态设置缩放比
            给meta标签设置id,用来获取元素
            document.getElementById("metaId").content=`initial-scale=${scale},minimum-scale=${scale},maximum-scale=${scale},user-scalable=no`;
            *注意,一定不要设置width=device-weidth,以及一定要设置最大最小缩放比

        })()
    </script>

缺陷:大设备图片失真等,缩放比为小数容易出现误差等.

## DPR缩放适配

把CSS像素缩放成与设备像素一致的尺寸

    和viewport适配类似(反推)，根据dpr的值，把视口缩放到和物理像素，也就是把css像素的值设置成物理像素，让所有设备都变成物理像素和css像素1:1的结果

    公式:   dpr = 视口宽度/375

    <script>
        (function(){
            //先要检查是否有这个标签，有则修改，无则创建
            var meta = document.querySelector("meta[name='viewport']");
            var scale = 1/window.devicePixelRatio;
            if(!meta){
               meta = document.createElement("meta");
               meta.name="viewport";
               mate.content="width=device-width,initial-scale=${scale},minimum-scale=${scale},maximum-scale=${scale},user-scalable=no"
               document.head.appendChild(meta)
            }else{
                //修改
                meta.setAttribute('content',"width=device-width,initial-scale=${scale},minimum-scale=${scale},maximum-scale=${scale},user-scalable=no")
            }


        })()
    </script>

## rem适配
