# 浏览器执行机制

## 线程

+ **js引擎线程**:负责解释执行js,用户输入，网络请求等
+ **GUI线程**:绘制用户界面，与js引擎线程互斥，js引擎线程执行时它就不执行
+ **HTTP网络请求线程**:处理get/post网络请求，待请求结束后将回调函数推入任务队列中
+ **定时触发器线程**:等待定时结束后将执行函数推入任务队列
+ **浏览器事件处理线程**:将交互事件(click ..)触发的处理函数推入任务队列

## 同步任务执行顺序

+ 代码未执行时，执行栈为空
+ 函数执行时，创建了一帧，这一帧包含了形参、局部变量(预编译)，将这一帧推入栈中
+ 内部函数执行，内部函数也进行预编译，推入栈中，重复第二步
+ 内部函数执行完，出先出栈
+ 本函数执行完，弹出栈
+ 执行栈空

## 异步任务执行顺序

+ 异步任务触发，进入event table,注册回调函数 
+ 回调函数前置任务结束(如异步请求数据返回了)，将回调函数推入event queue
+ 主线程完毕循环扫描执行栈(任务队列)并执行回调函数
+ 执行栈空

异步任务分为宏任务和微任务
**宏任务**:macroTask,计时器回调，事件回调，http回调等绝大部分异步函数进入宏任务
**微任务**：microTask,Promise产生的回调进入微任务
==微任务先于宏任务执行==
