# 后端得规范与思想

## 分层

* Web层 (接收和发送HTTP请求的，封装；别名controller层)
* 业务逻辑层 (别名服务层,文件常以xxxService为名)
* DAO层 （Date Access Object,数据访问对象,对对象进行操作，存储是对象转为数据，读取是数据转为对象）
* 持久层 (持久层，将数据长久的保存，如数据库)

如实现一个登陆功能:  
**Web层:**  LoginController接受参数，判断是否非法，然后传给服务层  
**服务层:**  LoginService通过DAO层从数据库获取数据，拿到User和收到的数据进行比对,  
**DAO层:**  从数据库获取数据并转换为对象  
**Domain:** User对象实体  

需要遵循单一职责原则

## 模块化

* 导入导出
  * ES6支持导入和导出，ES3,5缺乏相关概念
  * JS规范缺乏管理机制，不同的库没有统一的下载地址
  * Nodejs的Npm包管理工具能解决这些缺陷(从中央仓库下载)
  
* node引入系统自带模块时，直接require模块名即可，如果是自己的模块，则需要带上路径:

        系统自带的文件: require("http");
        用户自定义文件: require("./src/index.js");

* 想要在另一个文件中引入当前文件的变量，则需要在本文件中将其导出:

        导出:module.export = a;  //如果导出多个请使用对象
        或者使用:exports a;
        引入: let a = import("./test.js");
             console.log(a)  
* module.export与exports
  * 二者规范不同，前者使用的是ES6规范，后者是使用commonJS规范,
  * *****如果二者同时使用，那么会导出module.export的值,exports会失效*****;
  * **==module.exports == exports==**，说明二者最开始都是空对象且引用同一块
  
![avatar](/image/导出.png)
